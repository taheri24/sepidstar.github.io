<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ماژول های ارتباط با سرور | مستندات مربوط سپید استار</title>
    <meta name="description" content="فرانت اند نوشته شده برای سیستم تردد سپیدسیستم">
    <link rel="icon" href="/logo.png">
  <link rel="stylesheet" href="/vazir-font/font-face.css">
  <link rel="stylesheet" href="/material-iconfont/material-icons.css">
    
    <link rel="preload" href="/assets/css/0.styles.3226309a.css" as="style"><link rel="preload" href="/assets/js/app.838f999f.js" as="script"><link rel="preload" href="/assets/js/19.ae164c9b.js" as="script"><link rel="preload" href="/assets/js/3.18802c76.js" as="script"><link rel="prefetch" href="/assets/js/10.50bb0882.js"><link rel="prefetch" href="/assets/js/11.5c8967ef.js"><link rel="prefetch" href="/assets/js/12.cd3e6944.js"><link rel="prefetch" href="/assets/js/13.217ba691.js"><link rel="prefetch" href="/assets/js/14.38e0184c.js"><link rel="prefetch" href="/assets/js/15.3397bcf2.js"><link rel="prefetch" href="/assets/js/16.58b92ff2.js"><link rel="prefetch" href="/assets/js/17.0eacad5c.js"><link rel="prefetch" href="/assets/js/18.c6b4f169.js"><link rel="prefetch" href="/assets/js/2.6775de80.js"><link rel="prefetch" href="/assets/js/20.69c63d9a.js"><link rel="prefetch" href="/assets/js/21.5cb25289.js"><link rel="prefetch" href="/assets/js/22.82ae52b7.js"><link rel="prefetch" href="/assets/js/23.742ecb88.js"><link rel="prefetch" href="/assets/js/24.01bd1544.js"><link rel="prefetch" href="/assets/js/25.acf33fa1.js"><link rel="prefetch" href="/assets/js/26.a4a07a8d.js"><link rel="prefetch" href="/assets/js/27.8e02b1c2.js"><link rel="prefetch" href="/assets/js/28.7a1b0d1e.js"><link rel="prefetch" href="/assets/js/29.87d80fec.js"><link rel="prefetch" href="/assets/js/4.fd82b87b.js"><link rel="prefetch" href="/assets/js/5.6a651b9e.js"><link rel="prefetch" href="/assets/js/6.5911943f.js"><link rel="prefetch" href="/assets/js/7.49987c3d.js"><link rel="prefetch" href="/assets/js/8.2518d96b.js"><link rel="prefetch" href="/assets/js/9.5db9563e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3226309a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"> <header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">
      مستندات مربوط سپید استار
    </span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/01-intro/" class="nav-link">مقدمه</a></div><div class="nav-item"><a href="/02-login/" class="nav-link">ماژول لاگین</a></div><div class="nav-item"><a href="/03-app-modules/" class="nav-link router-link-active">ماژول ها</a></div><div class="nav-item"><a href="/04-components/" class="nav-link">کامپونت ها</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/01-intro/" class="nav-link">مقدمه</a></div><div class="nav-item"><a href="/02-login/" class="nav-link">ماژول لاگین</a></div><div class="nav-item"><a href="/03-app-modules/" class="nav-link router-link-active">ماژول ها</a></div><div class="nav-item"><a href="/04-components/" class="nav-link">کامپونت ها</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/03-app-modules/01-domain.html" class="sidebar-link">فایل ایندکس پروژه - domain.tsx</a></li><li><a href="/03-app-modules/02-app-model.html" class="sidebar-link">چند زبانه سازی</a></li><li><a href="/03-app-modules/03-api-modules.html" class="active sidebar-link">ماژول های ارتباط با سرور</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/03-app-modules/03-api-modules.html#ماژول-ارتباط-با-سروریس-بانک-اطلاعاتی-محور-sepidrestservice-api-tsx" class="sidebar-link">ماژول ارتباط با سروریس بانک اطلاعاتی محور - SepidRESTService-api.tsx</a></li><li class="sidebar-sub-header"><a href="/03-app-modules/03-api-modules.html#ماژول-ارتباط-با-device-manager" class="sidebar-link">ماژول ارتباط با device-manager</a></li><li class="sidebar-sub-header"><a href="/03-app-modules/03-api-modules.html#ماژول-ارتباط-bio-mini" class="sidebar-link">ماژول ارتباط bio-mini</a></li></ul></li><li><a href="/03-app-modules/04-simple-pages.html" class="sidebar-link">ماژول های ساده در فرانت اند</a></li><li><a href="/03-app-modules/05-device.html" class="sidebar-link">ماژول دستگاه ها در فرانت device-view.tsx</a></li><li><a href="/03-app-modules/06-employee.html" class="sidebar-link">ماژول پرسنل(مهم ترین Entity)</a></li><li><a href="/03-app-modules/91-webpack.html" class="sidebar-link">تنظیمات Webpack</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="ماژول-های-ارتباط-با-سرور"><a href="#ماژول-های-ارتباط-با-سرور" aria-hidden="true" class="header-anchor">#</a> ماژول های ارتباط با سرور</h1> <p>برای آنکه بتوانیم به بخوبی با سرور ارتباط برقرار نیاز به ارسال درخواست داریم ، ما برای این کار سه ماژول مختلف در نظر گرفته ایم و هر ماژول به یک سرور با پورت مختلف وصل می شود</p> <ul><li>ماژول ارتباط با سرویس بانک اطلاعاتی محور - پورت <code>51368</code></li> <li>ماژول ارتباط با سرویس مدیریت دستگاه ها - پورت <code>51369</code></li> <li>ماژول ارتباط با سرویس <code>BioMini</code> - پورت <code>51396</code></li></ul> <h2 id="ماژول-ارتباط-با-سروریس-بانک-اطلاعاتی-محور-sepidrestservice-api-tsx"><a href="#ماژول-ارتباط-با-سروریس-بانک-اطلاعاتی-محور-sepidrestservice-api-tsx" aria-hidden="true" class="header-anchor">#</a> ماژول ارتباط با سروریس بانک اطلاعاتی محور - <code>SepidRESTService-api.tsx</code></h2> <div class="code-preview-root" data-v-8e09d10e><header data-v-8e09d10e><div data-v-8e09d10e><button data-nav="1" class="next" data-v-8e09d10e><span data-v-8e09d10e>Next</span></button> <button data-nav="-1" class="prev" data-v-8e09d10e><span data-v-8e09d10e>Prev</span></button> <br data-v-8e09d10e> <div class="center-me" data-v-8e09d10e></div></div> <div class="space" data-v-8e09d10e></div></header> <section data-v-8e09d10e><div class="parts" data-v-8e09d10e><div class="inner" data-v-8e09d10e></div></div></section> <div class="__content" data-v-8e09d10e><div class="__inner" data-v-8e09d10e><div class="language-tsx line-numbers-mode" data-v-8e09d10e><div class="highlight-lines" data-v-8e09d10e><div class="highlighted" data-v-8e09d10e> </div><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e></div><pre class="language-tsx" data-v-8e09d10e><code data-v-8e09d10e><span class="token comment" data-v-8e09d10e>/// &lt;reference path=&quot;../../../dts/organic-ui.d.ts&quot; /&gt;</span>
<span class="token keyword" data-v-8e09d10e>import</span> <span class="token punctuation" data-v-8e09d10e>{</span> createClientForREST<span class="token punctuation" data-v-8e09d10e>,</span> IActionsForCRUD<span class="token punctuation" data-v-8e09d10e>,</span> OptionsForRESTClient<span class="token punctuation" data-v-8e09d10e>,</span> IListData<span class="token punctuation" data-v-8e09d10e>,</span> IAdvancedQueryFilters<span class="token punctuation" data-v-8e09d10e>,</span> isProdMode <span class="token punctuation" data-v-8e09d10e>}</span> <span class="token keyword" data-v-8e09d10e>from</span> <span class="token string" data-v-8e09d10e>&quot;@organic-ui&quot;</span><span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token keyword" data-v-8e09d10e>import</span> <span class="token punctuation" data-v-8e09d10e>{</span> AppEntities <span class="token punctuation" data-v-8e09d10e>}</span> <span class="token keyword" data-v-8e09d10e>from</span> <span class="token string" data-v-8e09d10e>&quot;../entities&quot;</span><span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token keyword" data-v-8e09d10e>import</span> <span class="token punctuation" data-v-8e09d10e>{</span> DeviceAuthenticationLevels <span class="token punctuation" data-v-8e09d10e>}</span> <span class="token keyword" data-v-8e09d10e>from</span> <span class="token string" data-v-8e09d10e>&quot;../zero-data-structures&quot;</span><span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token keyword" data-v-8e09d10e>const</span> baseURL <span class="token operator" data-v-8e09d10e>=</span> <span class="token punctuation" data-v-8e09d10e>(</span>localStorage<span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>getItem</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>'baseURL'</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token operator" data-v-8e09d10e>||</span> <span class="token string" data-v-8e09d10e>''</span> <span class="token comment" data-v-8e09d10e>//|| `http://${location.hostname}:51368/`;</span>
<span class="token keyword" data-v-8e09d10e>export</span> <span class="token keyword" data-v-8e09d10e>const</span> loginUrl <span class="token operator" data-v-8e09d10e>=</span> <span class="token string" data-v-8e09d10e>'/login'</span><span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token keyword" data-v-8e09d10e>const</span> webApiClientSettings<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token function-variable function" data-v-8e09d10e>OptionsForRESTClient</span> <span class="token operator" data-v-8e09d10e>=</span> <span class="token punctuation" data-v-8e09d10e>(</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> <span class="token punctuation" data-v-8e09d10e>{</span>
    <span class="token keyword" data-v-8e09d10e>const</span> token <span class="token operator" data-v-8e09d10e>=</span> localStorage<span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>getItem</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>'token'</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>return</span> <span class="token punctuation" data-v-8e09d10e>{</span>
        title<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token string" data-v-8e09d10e>'Web API'</span><span class="token punctuation" data-v-8e09d10e>,</span>
        baseURL<span class="token punctuation" data-v-8e09d10e>,</span>
        <span class="token function-variable function" data-v-8e09d10e>setBaseURL</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token parameter" data-v-8e09d10e>baseURL</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> localStorage<span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>setItem</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>'baseURL'</span><span class="token punctuation" data-v-8e09d10e>,</span> baseURL<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>,</span>
        headers<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token punctuation" data-v-8e09d10e>{</span>
            <span class="token string" data-v-8e09d10e>'Authorization'</span><span class="token punctuation" data-v-8e09d10e>:</span> token <span class="token operator" data-v-8e09d10e>?</span> <span class="token template-string" data-v-8e09d10e><span class="token string" data-v-8e09d10e>`Bearer </span><span class="token interpolation" data-v-8e09d10e><span class="token interpolation-punctuation punctuation" data-v-8e09d10e>${</span>token<span class="token interpolation-punctuation punctuation" data-v-8e09d10e>}</span></span><span class="token string" data-v-8e09d10e>`</span></span> <span class="token punctuation" data-v-8e09d10e>:</span> <span class="token string" data-v-8e09d10e>''</span><span class="token punctuation" data-v-8e09d10e>,</span>
            <span class="token string" data-v-8e09d10e>'Access-Control-Allow-Origin'</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token string" data-v-8e09d10e>'*'</span>
        <span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>,</span>
        <span class="token function-variable function" data-v-8e09d10e>validateStatus</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token parameter" data-v-8e09d10e>status</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> <span class="token punctuation" data-v-8e09d10e>{</span>
            <span class="token keyword" data-v-8e09d10e>if</span> <span class="token punctuation" data-v-8e09d10e>(</span>status <span class="token operator" data-v-8e09d10e>==</span> <span class="token number" data-v-8e09d10e>401</span><span class="token punctuation" data-v-8e09d10e>)</span> location<span class="token punctuation" data-v-8e09d10e>.</span>href <span class="token operator" data-v-8e09d10e>=</span> <span class="token template-string" data-v-8e09d10e><span class="token string" data-v-8e09d10e>`</span><span class="token interpolation" data-v-8e09d10e><span class="token interpolation-punctuation punctuation" data-v-8e09d10e>${</span>loginUrl<span class="token interpolation-punctuation punctuation" data-v-8e09d10e>}</span></span><span class="token string" data-v-8e09d10e>?message=session-expired`</span></span><span class="token punctuation" data-v-8e09d10e>;</span>
            <span class="token keyword" data-v-8e09d10e>if</span> <span class="token punctuation" data-v-8e09d10e>(</span>status <span class="token operator" data-v-8e09d10e>&gt;</span> <span class="token number" data-v-8e09d10e>400</span> <span class="token operator" data-v-8e09d10e>&amp;&amp;</span> <span class="token operator" data-v-8e09d10e>!</span><span class="token operator" data-v-8e09d10e>!</span>AuthenticationController<span class="token punctuation" data-v-8e09d10e>.</span>lastEnterTimeStamp<span class="token punctuation" data-v-8e09d10e>)</span> <span class="token punctuation" data-v-8e09d10e>{</span>
                <span class="token keyword" data-v-8e09d10e>const</span> now <span class="token operator" data-v-8e09d10e>=</span> <span class="token operator" data-v-8e09d10e>+</span><span class="token keyword" data-v-8e09d10e>new</span> <span class="token class-name" data-v-8e09d10e>Date</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
                <span class="token keyword" data-v-8e09d10e>const</span> diff <span class="token operator" data-v-8e09d10e>=</span> now <span class="token operator" data-v-8e09d10e>-</span> AuthenticationController<span class="token punctuation" data-v-8e09d10e>.</span>lastEnterTimeStamp<span class="token punctuation" data-v-8e09d10e>;</span>
                <span class="token keyword" data-v-8e09d10e>if</span> <span class="token punctuation" data-v-8e09d10e>(</span><span class="token punctuation" data-v-8e09d10e>(</span>diff <span class="token operator" data-v-8e09d10e>&lt;</span> <span class="token number" data-v-8e09d10e>2000</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token operator" data-v-8e09d10e>&amp;&amp;</span> <span class="token punctuation" data-v-8e09d10e>(</span>diff <span class="token operator" data-v-8e09d10e>&gt;</span> <span class="token number" data-v-8e09d10e>0</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>)</span>
                    location<span class="token punctuation" data-v-8e09d10e>.</span>href <span class="token operator" data-v-8e09d10e>=</span> <span class="token template-string" data-v-8e09d10e><span class="token string" data-v-8e09d10e>`</span><span class="token interpolation" data-v-8e09d10e><span class="token interpolation-punctuation punctuation" data-v-8e09d10e>${</span>loginUrl<span class="token interpolation-punctuation punctuation" data-v-8e09d10e>}</span></span><span class="token string" data-v-8e09d10e>?status=</span><span class="token interpolation" data-v-8e09d10e><span class="token interpolation-punctuation punctuation" data-v-8e09d10e>${</span>status<span class="token interpolation-punctuation punctuation" data-v-8e09d10e>}</span></span><span class="token string" data-v-8e09d10e>&amp;diff=</span><span class="token interpolation" data-v-8e09d10e><span class="token interpolation-punctuation punctuation" data-v-8e09d10e>${</span>diff<span class="token interpolation-punctuation punctuation" data-v-8e09d10e>}</span></span><span class="token string" data-v-8e09d10e>`</span></span><span class="token punctuation" data-v-8e09d10e>;</span>
            <span class="token punctuation" data-v-8e09d10e>}</span>
            <span class="token comment" data-v-8e09d10e>// if (status == 403) location.href = '/view/auth/login';</span>
            <span class="token keyword" data-v-8e09d10e>return</span> <span class="token punctuation" data-v-8e09d10e>(</span>status <span class="token operator" data-v-8e09d10e>&gt;=</span> <span class="token number" data-v-8e09d10e>200</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token operator" data-v-8e09d10e>&amp;&amp;</span> <span class="token punctuation" data-v-8e09d10e>(</span>status <span class="token operator" data-v-8e09d10e>&lt;=</span> <span class="token number" data-v-8e09d10e>299</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
        <span class="token punctuation" data-v-8e09d10e>}</span>
    <span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token punctuation" data-v-8e09d10e>}</span>
<span class="token keyword" data-v-8e09d10e>export</span> <span class="token keyword" data-v-8e09d10e>const</span> webApi <span class="token operator" data-v-8e09d10e>=</span> <span class="token function" data-v-8e09d10e>createClientForREST</span><span class="token punctuation" data-v-8e09d10e>(</span>webApiClientSettings<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>


<span class="token keyword" data-v-8e09d10e>export</span> <span class="token keyword" data-v-8e09d10e>interface</span> <span class="token class-name" data-v-8e09d10e>IRowListResultDto</span><span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>T</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e> </span><span class="token punctuation" data-v-8e09d10e>{</span>
    rows<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token constant" data-v-8e09d10e>T</span><span class="token punctuation" data-v-8e09d10e>[</span><span class="token punctuation" data-v-8e09d10e>]</span><span class="token punctuation" data-v-8e09d10e>;</span>
    totalRows<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>number</span><span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e>
export interface IResponseForLogin </span><span class="token punctuation" data-v-8e09d10e>{</span>
    success<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>boolean</span><span class="token punctuation" data-v-8e09d10e>;</span>
    message<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>string</span><span class="token punctuation" data-v-8e09d10e>;</span>
    token<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>string</span><span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e>
export interface IResponseForGetCurrentUser </span><span class="token punctuation" data-v-8e09d10e>{</span>
    username<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>string</span><span class="token punctuation" data-v-8e09d10e>;</span>
    accessibleModules<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>any</span><span class="token punctuation" data-v-8e09d10e>[</span><span class="token punctuation" data-v-8e09d10e>]</span><span class="token punctuation" data-v-8e09d10e>;</span>


<span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e>
export const AuthenticationController = </span><span class="token punctuation" data-v-8e09d10e>{</span>
    lastEnterTimeStamp<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token number" data-v-8e09d10e>0</span><span class="token punctuation" data-v-8e09d10e>,</span>
    <span class="token function-variable function" data-v-8e09d10e>login</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token punctuation" data-v-8e09d10e>(</span><span class="token parameter" data-v-8e09d10e>username<span class="token punctuation" data-v-8e09d10e>,</span> password</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token operator" data-v-8e09d10e>=&gt;</span>
        webApi<span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>IResponseForLogin</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>(&quot;POST&quot;, '/SepidRESTService/Authentication/Login', </span><span class="token punctuation" data-v-8e09d10e>{</span> username<span class="token punctuation" data-v-8e09d10e>,</span> password <span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e>).then(
            r =&gt; </span><span class="token punctuation" data-v-8e09d10e>{</span>
                <span class="token keyword" data-v-8e09d10e>if</span> <span class="token punctuation" data-v-8e09d10e>(</span>r<span class="token punctuation" data-v-8e09d10e>.</span>success<span class="token punctuation" data-v-8e09d10e>)</span> <span class="token punctuation" data-v-8e09d10e>{</span>
                    AuthenticationController<span class="token punctuation" data-v-8e09d10e>.</span>lastEnterTimeStamp <span class="token operator" data-v-8e09d10e>=</span> <span class="token operator" data-v-8e09d10e>+</span><span class="token keyword" data-v-8e09d10e>new</span> <span class="token class-name" data-v-8e09d10e>Date</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
                    localStorage<span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>setItem</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>'token'</span><span class="token punctuation" data-v-8e09d10e>,</span> r<span class="token punctuation" data-v-8e09d10e>.</span>token<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
                    <span class="token function" data-v-8e09d10e>setTimeout</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> location<span class="token punctuation" data-v-8e09d10e>.</span>href <span class="token operator" data-v-8e09d10e>=</span> <span class="token string" data-v-8e09d10e>'/view/dashboard'</span><span class="token punctuation" data-v-8e09d10e>,</span> <span class="token number" data-v-8e09d10e>2000</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
                <span class="token punctuation" data-v-8e09d10e>}</span>
                <span class="token keyword" data-v-8e09d10e>return</span> r<span class="token punctuation" data-v-8e09d10e>;</span>
            <span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e>
        )
    ,
    getCurrentUserInformation: () =&gt; webApi</span><span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>IResponseForGetCurrentUser</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>('POST', '/SepidRESTService/Authentication/CurrentUserInformation')
}
export const BasicController = </span><span class="token punctuation" data-v-8e09d10e>{</span>
    <span class="token function-variable function" data-v-8e09d10e>getVersion</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token punctuation" data-v-8e09d10e>(</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> webApi<span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span>string</span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>(&quot;GET&quot;, &quot;/SepidRESTService/BasicInfo/GetVersion&quot;)
}

function crudControllerFactory</span><span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>T</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>(pluralName: string, </span><span class="token punctuation" data-v-8e09d10e>{</span> singularName<span class="token punctuation" data-v-8e09d10e>,</span> debugReadList<span class="token punctuation" data-v-8e09d10e>,</span> extraReadList <span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e> = </span><span class="token punctuation" data-v-8e09d10e>{</span><span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e> as any): IActionsForCRUD</span><span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>T</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e> </span><span class="token punctuation" data-v-8e09d10e>{</span>
    singularName <span class="token operator" data-v-8e09d10e>=</span> singularName <span class="token operator" data-v-8e09d10e>||</span> <span class="token punctuation" data-v-8e09d10e>(</span>pluralName<span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>endsWith</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>'s'</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token operator" data-v-8e09d10e>?</span> pluralName<span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>substr</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token number" data-v-8e09d10e>0</span><span class="token punctuation" data-v-8e09d10e>,</span> pluralName<span class="token punctuation" data-v-8e09d10e>.</span>length <span class="token operator" data-v-8e09d10e>-</span> <span class="token number" data-v-8e09d10e>1</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token punctuation" data-v-8e09d10e>:</span> pluralName<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>const</span> <span class="token function-variable function" data-v-8e09d10e>readList</span> <span class="token operator" data-v-8e09d10e>=</span> <span class="token punctuation" data-v-8e09d10e>(</span><span class="token parameter" data-v-8e09d10e>data<span class="token punctuation" data-v-8e09d10e>:</span> IAdvancedQueryFilters</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> webApi<span class="token operator" data-v-8e09d10e>&lt;</span>IListData<span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>T</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>&gt;('POST', `/SepidRESTService/${pluralName}/${singularName}ListEx`, data);

    const actions = </span><span class="token punctuation" data-v-8e09d10e>{</span>
        readList<span class="token punctuation" data-v-8e09d10e>,</span>
        <span class="token function-variable function" data-v-8e09d10e>read</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token parameter" data-v-8e09d10e>id</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> <span class="token function" data-v-8e09d10e>webApi</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>'GET'</span><span class="token punctuation" data-v-8e09d10e>,</span> <span class="token template-string" data-v-8e09d10e><span class="token string" data-v-8e09d10e>`/SepidRESTService/</span><span class="token interpolation" data-v-8e09d10e><span class="token interpolation-punctuation punctuation" data-v-8e09d10e>${</span>pluralName<span class="token interpolation-punctuation punctuation" data-v-8e09d10e>}</span></span><span class="token string" data-v-8e09d10e>/</span><span class="token interpolation" data-v-8e09d10e><span class="token interpolation-punctuation punctuation" data-v-8e09d10e>${</span>singularName<span class="token interpolation-punctuation punctuation" data-v-8e09d10e>}</span></span><span class="token string" data-v-8e09d10e>/</span><span class="token interpolation" data-v-8e09d10e><span class="token interpolation-punctuation punctuation" data-v-8e09d10e>${</span>id<span class="token interpolation-punctuation punctuation" data-v-8e09d10e>}</span></span><span class="token string" data-v-8e09d10e>`</span></span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>,</span>
        <span class="token function-variable function" data-v-8e09d10e>create</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token parameter" data-v-8e09d10e>data</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> <span class="token function" data-v-8e09d10e>webApi</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>'POST'</span><span class="token punctuation" data-v-8e09d10e>,</span> <span class="token template-string" data-v-8e09d10e><span class="token string" data-v-8e09d10e>`/SepidRESTService/</span><span class="token interpolation" data-v-8e09d10e><span class="token interpolation-punctuation punctuation" data-v-8e09d10e>${</span>pluralName<span class="token interpolation-punctuation punctuation" data-v-8e09d10e>}</span></span><span class="token string" data-v-8e09d10e>/</span><span class="token interpolation" data-v-8e09d10e><span class="token interpolation-punctuation punctuation" data-v-8e09d10e>${</span>singularName<span class="token interpolation-punctuation punctuation" data-v-8e09d10e>}</span></span><span class="token string" data-v-8e09d10e>`</span></span><span class="token punctuation" data-v-8e09d10e>,</span> data<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>,</span>
        <span class="token function-variable function" data-v-8e09d10e>deleteList</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token parameter" data-v-8e09d10e>ids</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> <span class="token function" data-v-8e09d10e>webApi</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>'POST'</span><span class="token punctuation" data-v-8e09d10e>,</span> <span class="token template-string" data-v-8e09d10e><span class="token string" data-v-8e09d10e>`/SepidRESTService/</span><span class="token interpolation" data-v-8e09d10e><span class="token interpolation-punctuation punctuation" data-v-8e09d10e>${</span>pluralName<span class="token interpolation-punctuation punctuation" data-v-8e09d10e>}</span></span><span class="token string" data-v-8e09d10e>/DeleteList`</span></span><span class="token punctuation" data-v-8e09d10e>,</span> ids<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>,</span>
        <span class="token function-variable function" data-v-8e09d10e>update</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token punctuation" data-v-8e09d10e>(</span><span class="token parameter" data-v-8e09d10e>id<span class="token punctuation" data-v-8e09d10e>,</span> data</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> <span class="token function" data-v-8e09d10e>webApi</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>'PUT'</span><span class="token punctuation" data-v-8e09d10e>,</span> <span class="token template-string" data-v-8e09d10e><span class="token string" data-v-8e09d10e>`/SepidRESTService/</span><span class="token interpolation" data-v-8e09d10e><span class="token interpolation-punctuation punctuation" data-v-8e09d10e>${</span>pluralName<span class="token interpolation-punctuation punctuation" data-v-8e09d10e>}</span></span><span class="token string" data-v-8e09d10e>/</span><span class="token interpolation" data-v-8e09d10e><span class="token interpolation-punctuation punctuation" data-v-8e09d10e>${</span>singularName<span class="token interpolation-punctuation punctuation" data-v-8e09d10e>}</span></span><span class="token string" data-v-8e09d10e>`</span></span><span class="token punctuation" data-v-8e09d10e>,</span> data<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>,</span>
        <span class="token function-variable function" data-v-8e09d10e>getText</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token parameter" data-v-8e09d10e>dto</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> <span class="token punctuation" data-v-8e09d10e>(</span>dto <span class="token keyword" data-v-8e09d10e>as</span> <span class="token builtin" data-v-8e09d10e>any</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>.</span>name<span class="token punctuation" data-v-8e09d10e>,</span>
        <span class="token function-variable function" data-v-8e09d10e>readByIds</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token parameter" data-v-8e09d10e>values</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> <span class="token punctuation" data-v-8e09d10e>{</span>
            <span class="token keyword" data-v-8e09d10e>const</span> filterModel <span class="token operator" data-v-8e09d10e>=</span> <span class="token punctuation" data-v-8e09d10e>[</span><span class="token punctuation" data-v-8e09d10e>{</span> values<span class="token punctuation" data-v-8e09d10e>,</span> op<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token string" data-v-8e09d10e>'IN'</span><span class="token punctuation" data-v-8e09d10e>,</span> fieldName<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token string" data-v-8e09d10e>'Id'</span><span class="token punctuation" data-v-8e09d10e>,</span> fieldType<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token string" data-v-8e09d10e>'enum'</span> <span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>]</span><span class="token punctuation" data-v-8e09d10e>;</span>
            <span class="token keyword" data-v-8e09d10e>return</span> actions<span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>readList</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token punctuation" data-v-8e09d10e>{</span> fromRowIndex<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token number" data-v-8e09d10e>0</span><span class="token punctuation" data-v-8e09d10e>,</span> toRowIndex<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token number" data-v-8e09d10e>0</span><span class="token punctuation" data-v-8e09d10e>,</span> filterModel<span class="token punctuation" data-v-8e09d10e>,</span> sortModel<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token keyword" data-v-8e09d10e>null</span> <span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
        <span class="token punctuation" data-v-8e09d10e>}</span>
    <span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e> as IActionsForCRUD</span><span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>T</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>;
    return actions;
}
function simpleReadListFactory</span><span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>T</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>(pluralName, singularName) </span><span class="token punctuation" data-v-8e09d10e>{</span>
    <span class="token keyword" data-v-8e09d10e>return</span> <span class="token punctuation" data-v-8e09d10e>(</span><span class="token parameter" data-v-8e09d10e>data<span class="token punctuation" data-v-8e09d10e>:</span> IAdvancedQueryFilters</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> webApi<span class="token operator" data-v-8e09d10e>&lt;</span>OrganicUi<span class="token punctuation" data-v-8e09d10e>.</span>IListData<span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>T</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>&gt;('POST', `/SepidRESTService/${pluralName}/${singularName}List`, data);
}

// ************************************* DOMAIN CONTROLLERS ***************************

// Roles
export const RolesController = crudControllerFactory</span><span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>AppEntities.RoleDTO</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>('Roles');
RolesController.readList = simpleReadListFactory('Roles', 'Role');
RolesController.getText = dto =&gt; dto.name;

// UserProfile
export const UserProfilesController = crudControllerFactory</span><span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>AppEntities.UserProfileDTO</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>('UserProfile', </span><span class="token punctuation" data-v-8e09d10e>{</span> singularName<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token string" data-v-8e09d10e>'UserProfile'</span> <span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e>)
// Users
export const UsersController = crudControllerFactory</span><span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>AppEntities.UserDTO</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>('Users');
UsersController.getText = dto =&gt; dto.fullName;
export const UserGroupsController = crudControllerFactory</span><span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>AppEntities.UserGroupDTO</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>('UserGroups');
UserGroupsController.readList = (params: IAdvancedQueryFilters) =&gt; webApi&lt;OrganicUi.IListData</span><span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>AppEntities.UserGroupDTO</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>&gt;('POST', `/SepidRESTService/UserGroups/UserGroupList`, params);


// Devices
const deviceActions = </span><span class="token punctuation" data-v-8e09d10e>{</span>
<span class="token comment" data-v-8e09d10e>//     getDevicesForEmployee(employeeId) {</span>
<span class="token comment" data-v-8e09d10e>//         return webApi('POST', `/SepidRESTService/Employees/GetDevicesForEmployee`, employeeId);</span>
<span class="token comment" data-v-8e09d10e>//     },</span>
<span class="token comment" data-v-8e09d10e>//     setDevicesForEmployee(deviceEmps) {</span>
<span class="token comment" data-v-8e09d10e>//         return webApi('POST', `/SepidRESTService/Employees/SetDevicesForEmployee`, deviceEmps);</span>
<span class="token comment" data-v-8e09d10e>//     },</span>
<span class="token comment" data-v-8e09d10e>//     getEmployeesForDevice(deviceId) {</span>
<span class="token comment" data-v-8e09d10e>//         return webApi('POST', `/SepidRESTService/Employees/GetEmployeesForDevice`, deviceId);</span>
<span class="token comment" data-v-8e09d10e>//     },</span>
<span class="token comment" data-v-8e09d10e>//     setEmployeesForDevice(deviceEmps) {</span>
<span class="token comment" data-v-8e09d10e>//         return webApi('POST', `/SepidRESTService/Employees/SetEmployeesForDevice`, deviceEmps);</span>
<span class="token comment" data-v-8e09d10e>//     }</span>
<span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e>
export const DevicesController = Object.assign(</span><span class="token punctuation" data-v-8e09d10e>{</span><span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e>, deviceActions, crudControllerFactory</span><span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>AppEntities.DeviceDTO</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>('Devices'));
export const DevicesListIncludeBioMini = p =&gt; DevicesController.readList(p).then(listData =&gt; </span><span class="token punctuation" data-v-8e09d10e>{</span>
    listData<span class="token punctuation" data-v-8e09d10e>.</span>totalRows<span class="token operator" data-v-8e09d10e>++</span><span class="token punctuation" data-v-8e09d10e>;</span>
    listData<span class="token punctuation" data-v-8e09d10e>.</span>rows <span class="token operator" data-v-8e09d10e>=</span> <span class="token punctuation" data-v-8e09d10e>[</span><span class="token punctuation" data-v-8e09d10e>{</span> id<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token operator" data-v-8e09d10e>-</span><span class="token number" data-v-8e09d10e>1</span><span class="token punctuation" data-v-8e09d10e>,</span> name<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token string" data-v-8e09d10e>'bio-mini'</span><span class="token punctuation" data-v-8e09d10e>,</span> active<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token number" data-v-8e09d10e>1</span> <span class="token punctuation" data-v-8e09d10e>}</span> <span class="token keyword" data-v-8e09d10e>as</span> AppEntities<span class="token punctuation" data-v-8e09d10e>.</span>DeviceDTO<span class="token punctuation" data-v-8e09d10e>]</span><span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>concat</span><span class="token punctuation" data-v-8e09d10e>(</span>listData<span class="token punctuation" data-v-8e09d10e>.</span>rows<span class="token punctuation" data-v-8e09d10e>)</span>
    <span class="token keyword" data-v-8e09d10e>return</span> listData<span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e>);
export const scanFinger = (deviceId: string) =&gt; </span><span class="token punctuation" data-v-8e09d10e>{</span>
    <span class="token keyword" data-v-8e09d10e>return</span> <span class="token keyword" data-v-8e09d10e>this</span><span class="token punctuation" data-v-8e09d10e>.</span>http<span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>post</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token template-string" data-v-8e09d10e><span class="token string" data-v-8e09d10e>`</span><span class="token interpolation" data-v-8e09d10e><span class="token interpolation-punctuation punctuation" data-v-8e09d10e>${</span><span class="token keyword" data-v-8e09d10e>this</span><span class="token punctuation" data-v-8e09d10e>.</span>deviceServiceEndPointUrl<span class="token interpolation-punctuation punctuation" data-v-8e09d10e>}</span></span><span class="token string" data-v-8e09d10e>/ScanFinger`</span></span><span class="token punctuation" data-v-8e09d10e>,</span>
        <span class="token punctuation" data-v-8e09d10e>{</span> Serial<span class="token punctuation" data-v-8e09d10e>:</span> deviceId<span class="token punctuation" data-v-8e09d10e>,</span> <span class="token constant" data-v-8e09d10e>IP</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token keyword" data-v-8e09d10e>null</span><span class="token punctuation" data-v-8e09d10e>,</span> model<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token keyword" data-v-8e09d10e>null</span> <span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>,</span>
        <span class="token keyword" data-v-8e09d10e>this</span><span class="token punctuation" data-v-8e09d10e>.</span>authService<span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>getAuthorizationHeader</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>)</span>
        <span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>map</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token parameter" data-v-8e09d10e>result</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> result<span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>json</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e>


// EmploymentStatus
export const EmploymentStatusController = crudControllerFactory</span><span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>AppEntities.EmploymentStatusDTO</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>('EmploymentStatuses', </span><span class="token punctuation" data-v-8e09d10e>{</span> singularName<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token string" data-v-8e09d10e>'EmploymentStatus'</span><span class="token punctuation" data-v-8e09d10e>,</span> debugReadList<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token boolean" data-v-8e09d10e>true</span> <span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e>);

// Employees
const employeeActions = </span><span class="token punctuation" data-v-8e09d10e>{</span>
    <span class="token function" data-v-8e09d10e>getDevicesForEmployee</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token parameter" data-v-8e09d10e>employeeId</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token punctuation" data-v-8e09d10e>{</span>
        <span class="token keyword" data-v-8e09d10e>return</span> <span class="token function" data-v-8e09d10e>webApi</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>'POST'</span><span class="token punctuation" data-v-8e09d10e>,</span> <span class="token template-string" data-v-8e09d10e><span class="token string" data-v-8e09d10e>`/SepidRESTService/Employees/GetDevicesForEmployee`</span></span><span class="token punctuation" data-v-8e09d10e>,</span> employeeId<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>,</span>
    <span class="token function" data-v-8e09d10e>setDevicesForEmployee</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token parameter" data-v-8e09d10e>deviceEmps</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token punctuation" data-v-8e09d10e>{</span>
        <span class="token keyword" data-v-8e09d10e>return</span> <span class="token function" data-v-8e09d10e>webApi</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>'POST'</span><span class="token punctuation" data-v-8e09d10e>,</span> <span class="token template-string" data-v-8e09d10e><span class="token string" data-v-8e09d10e>`/SepidRESTService/Employees/SetDevicesForEmployee`</span></span><span class="token punctuation" data-v-8e09d10e>,</span> deviceEmps<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>,</span>
    <span class="token function" data-v-8e09d10e>getEmployeesForDevice</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token parameter" data-v-8e09d10e>deviceId</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token punctuation" data-v-8e09d10e>{</span>
        <span class="token keyword" data-v-8e09d10e>return</span> <span class="token function" data-v-8e09d10e>webApi</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>'POST'</span><span class="token punctuation" data-v-8e09d10e>,</span> <span class="token template-string" data-v-8e09d10e><span class="token string" data-v-8e09d10e>`/SepidRESTService/Employees/GetEmployeesForDevice`</span></span><span class="token punctuation" data-v-8e09d10e>,</span> deviceId<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>,</span>
    <span class="token function" data-v-8e09d10e>setEmployeesForDevice</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token parameter" data-v-8e09d10e>deviceEmps</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token punctuation" data-v-8e09d10e>{</span>
        <span class="token keyword" data-v-8e09d10e>return</span> <span class="token function" data-v-8e09d10e>webApi</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>'POST'</span><span class="token punctuation" data-v-8e09d10e>,</span> <span class="token template-string" data-v-8e09d10e><span class="token string" data-v-8e09d10e>`/SepidRESTService/Employees/SetEmployeesForDevice`</span></span><span class="token punctuation" data-v-8e09d10e>,</span> deviceEmps<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token punctuation" data-v-8e09d10e>}</span>
<span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e>
export const EmployeesController = Object.assign(</span><span class="token punctuation" data-v-8e09d10e>{</span><span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e>, employeeActions, crudControllerFactory</span><span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>AppEntities.EmployeeDTO</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>('Employees'));
EmployeesController.getText = dto =&gt; dto.firstName + ' ' + dto.lastName;
EmployeesController.beforeSave = dto =&gt; </span><span class="token punctuation" data-v-8e09d10e>{</span>
    dto<span class="token punctuation" data-v-8e09d10e>.</span>authLevel <span class="token operator" data-v-8e09d10e>=</span> dto<span class="token punctuation" data-v-8e09d10e>.</span>isAdmin <span class="token operator" data-v-8e09d10e>?</span> DeviceAuthenticationLevels<span class="token punctuation" data-v-8e09d10e>.</span>AdminUser <span class="token punctuation" data-v-8e09d10e>:</span> DeviceAuthenticationLevels<span class="token punctuation" data-v-8e09d10e>.</span>NormalUser<span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>return</span> dto<span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e>
EmployeesController.mapFormData = dto =&gt; </span><span class="token punctuation" data-v-8e09d10e>{</span>
    dto<span class="token punctuation" data-v-8e09d10e>.</span>isAdmin <span class="token operator" data-v-8e09d10e>=</span> <span class="token punctuation" data-v-8e09d10e>(</span>dto<span class="token punctuation" data-v-8e09d10e>.</span>authLevel <span class="token operator" data-v-8e09d10e>==</span> DeviceAuthenticationLevels<span class="token punctuation" data-v-8e09d10e>.</span>AdminUser<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>return</span> dto<span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e>
// Departments
function mapDepartments(items: AppEntities.DepartmentDTO[]) </span><span class="token punctuation" data-v-8e09d10e>{</span>
    <span class="token keyword" data-v-8e09d10e>const</span> results<span class="token punctuation" data-v-8e09d10e>:</span> AppEntities<span class="token punctuation" data-v-8e09d10e>.</span>DepartmentDTO<span class="token punctuation" data-v-8e09d10e>[</span><span class="token punctuation" data-v-8e09d10e>]</span> <span class="token operator" data-v-8e09d10e>=</span> <span class="token constant" data-v-8e09d10e>JSON</span><span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>parse</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token constant" data-v-8e09d10e>JSON</span><span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>stringify</span><span class="token punctuation" data-v-8e09d10e>(</span>items<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>let</span> counter <span class="token operator" data-v-8e09d10e>=</span> <span class="token number" data-v-8e09d10e>0</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>while</span> <span class="token punctuation" data-v-8e09d10e>(</span>counter <span class="token operator" data-v-8e09d10e>&lt;</span> results<span class="token punctuation" data-v-8e09d10e>.</span>length<span class="token punctuation" data-v-8e09d10e>)</span> <span class="token punctuation" data-v-8e09d10e>{</span>
        <span class="token keyword" data-v-8e09d10e>const</span> item <span class="token operator" data-v-8e09d10e>=</span> results<span class="token punctuation" data-v-8e09d10e>[</span>counter<span class="token punctuation" data-v-8e09d10e>]</span><span class="token punctuation" data-v-8e09d10e>;</span>
        item<span class="token punctuation" data-v-8e09d10e>.</span>subDepartments <span class="token operator" data-v-8e09d10e>&amp;&amp;</span> results<span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>push</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token operator" data-v-8e09d10e>...</span><span class="token punctuation" data-v-8e09d10e>(</span>item<span class="token punctuation" data-v-8e09d10e>.</span>subDepartments<span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>map</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token parameter" data-v-8e09d10e>sub</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> Object<span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>assign</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token punctuation" data-v-8e09d10e>{</span> parentId<span class="token punctuation" data-v-8e09d10e>:</span> item<span class="token punctuation" data-v-8e09d10e>.</span>id <span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>,</span> sub<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
        counter<span class="token operator" data-v-8e09d10e>++</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token punctuation" data-v-8e09d10e>}</span>
    <span class="token keyword" data-v-8e09d10e>return</span> results<span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e>
export const DepartmentsController = crudControllerFactory</span><span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>AppEntities.DepartmentDTO</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>('Departments');
DepartmentsController.readList = (data: IAdvancedQueryFilters) =&gt; webApi&lt;OrganicUi.IListData</span><span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>AppEntities.DepartmentDTO</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>&gt;('POST', `/SepidRESTService/Departments/DepartmentList`, data).then(mapDepartments as any);

// DataItemGroups
export const DataItemGroupsController = </span><span class="token punctuation" data-v-8e09d10e>{</span>
    <span class="token operator" data-v-8e09d10e>...</span>crudControllerFactory<span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>AppEntities.DataItemGroupDTO</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>('DataItemGroups'),
    readListModular: params =&gt; webApi('POST', '/SepidRESTService/DataItemGroups/DataItemGroupListExModular', params)
};


// AccessControl
export const SchedulesController = crudControllerFactory</span><span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>AppEntities.ScheduleDTO</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>('Schedules');
export const ZonesController = crudControllerFactory</span><span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>AppEntities.ZoneDTO</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>('Zones');
export const DoorsController = crudControllerFactory</span><span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>AppEntities.DoorDTO</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>('Doors');
export const AccessGroupController = crudControllerFactory</span><span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>AppEntities.AccessGroupDTO</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>('AccessGroups');

export const HolidayGroupController = Object.assign(  
    crudControllerFactory</span><span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>AppEntities.HolidayGroupDTO</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>('HolidayGroups') ,
    </span><span class="token punctuation" data-v-8e09d10e>{</span> <span class="token function-variable function" data-v-8e09d10e>importHolidays</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token parameter" data-v-8e09d10e>data</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> <span class="token function" data-v-8e09d10e>webApi</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>'POST'</span><span class="token punctuation" data-v-8e09d10e>,</span><span class="token string" data-v-8e09d10e>'/SepidRESTService/HolidayGroups/HolidaysImport'</span><span class="token punctuation" data-v-8e09d10e>,</span> data<span class="token punctuation" data-v-8e09d10e>)</span> <span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e>);


// Reports
export const ReportsService = </span><span class="token punctuation" data-v-8e09d10e>{</span>
    <span class="token function-variable function" data-v-8e09d10e>GetAttendanceGroupedByDate</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token parameter" data-v-8e09d10e>groupByDataPart</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> <span class="token function" data-v-8e09d10e>webApi</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>'POST'</span><span class="token punctuation" data-v-8e09d10e>,</span> <span class="token string" data-v-8e09d10e>'/SepidRESTService/Reports/GetAttendanceGroupedByDate'</span><span class="token punctuation" data-v-8e09d10e>,</span> <span class="token punctuation" data-v-8e09d10e>{</span> groupByDataPart<span class="token punctuation" data-v-8e09d10e>,</span> StartDateTime<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token string" data-v-8e09d10e>&quot;&quot;</span> <span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>,</span>
    <span class="token function-variable function" data-v-8e09d10e>GetEntityUsage</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token punctuation" data-v-8e09d10e>(</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> <span class="token function" data-v-8e09d10e>webApi</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>'POST'</span><span class="token punctuation" data-v-8e09d10e>,</span> <span class="token string" data-v-8e09d10e>'/SepidRESTService/Reports/GetEntityUsage'</span><span class="token punctuation" data-v-8e09d10e>,</span> <span class="token punctuation" data-v-8e09d10e>{</span><span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>,</span>
    <span class="token function-variable function" data-v-8e09d10e>attendanceGetLatestLogs</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token parameter" data-v-8e09d10e>p</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> <span class="token function" data-v-8e09d10e>webApi</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>'POST'</span><span class="token punctuation" data-v-8e09d10e>,</span> <span class="token string" data-v-8e09d10e>'/SepidRESTService/Reports/AttendanceGetLatestLogs'</span><span class="token punctuation" data-v-8e09d10e>,</span> p<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>,</span>
    <span class="token function-variable function" data-v-8e09d10e>getEmployeeImage</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token parameter" data-v-8e09d10e>id</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> <span class="token template-string" data-v-8e09d10e><span class="token string" data-v-8e09d10e>`</span><span class="token interpolation" data-v-8e09d10e><span class="token interpolation-punctuation punctuation" data-v-8e09d10e>${</span>baseURL<span class="token interpolation-punctuation punctuation" data-v-8e09d10e>}</span></span><span class="token string" data-v-8e09d10e>/SepidRESTService/Employees/EmployeeImage/</span><span class="token interpolation" data-v-8e09d10e><span class="token interpolation-punctuation punctuation" data-v-8e09d10e>${</span>id<span class="token interpolation-punctuation punctuation" data-v-8e09d10e>}</span></span><span class="token string" data-v-8e09d10e>`</span></span><span class="token punctuation" data-v-8e09d10e>,</span>
    <span class="token function-variable function" data-v-8e09d10e>AttendanceGetTodayStatistics</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token punctuation" data-v-8e09d10e>(</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> <span class="token function" data-v-8e09d10e>webApi</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>'GET'</span><span class="token punctuation" data-v-8e09d10e>,</span> <span class="token string" data-v-8e09d10e>'/SepidRESTService/Reports/AttendanceGetTodayStatistics'</span><span class="token punctuation" data-v-8e09d10e>)</span>
<span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e>


const customMapProps = </span><span class="token punctuation" data-v-8e09d10e>{</span>
    startFrom<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token string" data-v-8e09d10e>'_start'</span><span class="token punctuation" data-v-8e09d10e>,</span>
    rowCount<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token string" data-v-8e09d10e>'_limit'</span>

<span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e>
function bodyMapper(</span><span class="token punctuation" data-v-8e09d10e>{</span> <span class="token comment" data-v-8e09d10e>/*url, method,*/</span> body <span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e>) </span><span class="token punctuation" data-v-8e09d10e>{</span>
    <span class="token keyword" data-v-8e09d10e>if</span> <span class="token punctuation" data-v-8e09d10e>(</span><span class="token keyword" data-v-8e09d10e>typeof</span> body <span class="token operator" data-v-8e09d10e>!=</span> <span class="token string" data-v-8e09d10e>'object'</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token keyword" data-v-8e09d10e>return</span> body<span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>if</span> <span class="token punctuation" data-v-8e09d10e>(</span>body <span class="token operator" data-v-8e09d10e>&amp;&amp;</span> <span class="token string" data-v-8e09d10e>'startFrom'</span> <span class="token keyword" data-v-8e09d10e>in</span> body <span class="token operator" data-v-8e09d10e>&amp;&amp;</span> <span class="token string" data-v-8e09d10e>'rowCount'</span> <span class="token keyword" data-v-8e09d10e>in</span> body<span class="token punctuation" data-v-8e09d10e>)</span> <span class="token punctuation" data-v-8e09d10e>{</span>
        <span class="token keyword" data-v-8e09d10e>const</span> result <span class="token operator" data-v-8e09d10e>=</span> <span class="token punctuation" data-v-8e09d10e>{</span>
            fromRowIndex<span class="token punctuation" data-v-8e09d10e>:</span> body<span class="token punctuation" data-v-8e09d10e>.</span>startFrom<span class="token punctuation" data-v-8e09d10e>,</span>
            toRowIndex<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token punctuation" data-v-8e09d10e>(</span>body<span class="token punctuation" data-v-8e09d10e>.</span>rowCount <span class="token operator" data-v-8e09d10e>+</span> body<span class="token punctuation" data-v-8e09d10e>.</span>startFrom<span class="token punctuation" data-v-8e09d10e>)</span> <span class="token operator" data-v-8e09d10e>-</span> <span class="token number" data-v-8e09d10e>1</span><span class="token punctuation" data-v-8e09d10e>,</span>
            filterModel<span class="token punctuation" data-v-8e09d10e>:</span> body<span class="token punctuation" data-v-8e09d10e>.</span>filterModel <span class="token operator" data-v-8e09d10e>||</span> body<span class="token punctuation" data-v-8e09d10e>.</span>filters <span class="token operator" data-v-8e09d10e>||</span> <span class="token punctuation" data-v-8e09d10e>[</span><span class="token punctuation" data-v-8e09d10e>]</span>
        <span class="token punctuation" data-v-8e09d10e>}</span> <span class="token keyword" data-v-8e09d10e>as</span> Partial<span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>IAdvancedQueryFilters</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>;
        delete body.startFrom;
        delete body.rowCount;
        delete body.filters;
        return Object.assign(result, body);
    }
    return body;
}
Object.assign(webApi, </span><span class="token punctuation" data-v-8e09d10e>{</span> bodyMapper <span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e>); </span></code></pre><div class="line-numbers-wrapper" data-v-8e09d10e><span class="line-number" data-v-8e09d10e>1</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>2</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>3</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>4</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>5</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>6</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>7</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>8</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>9</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>10</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>11</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>12</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>13</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>14</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>15</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>16</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>17</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>18</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>19</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>20</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>21</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>22</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>23</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>24</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>25</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>26</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>27</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>28</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>29</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>30</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>31</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>32</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>33</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>34</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>35</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>36</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>37</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>38</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>39</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>40</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>41</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>42</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>43</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>44</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>45</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>46</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>47</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>48</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>49</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>50</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>51</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>52</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>53</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>54</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>55</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>56</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>57</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>58</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>59</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>60</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>61</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>62</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>63</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>64</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>65</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>66</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>67</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>68</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>69</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>70</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>71</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>72</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>73</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>74</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>75</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>76</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>77</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>78</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>79</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>80</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>81</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>82</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>83</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>84</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>85</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>86</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>87</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>88</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>89</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>90</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>91</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>92</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>93</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>94</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>95</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>96</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>97</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>98</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>99</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>100</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>101</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>102</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>103</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>104</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>105</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>106</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>107</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>108</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>109</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>110</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>111</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>112</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>113</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>114</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>115</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>116</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>117</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>118</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>119</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>120</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>121</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>122</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>123</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>124</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>125</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>126</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>127</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>128</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>129</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>130</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>131</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>132</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>133</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>134</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>135</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>136</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>137</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>138</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>139</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>140</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>141</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>142</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>143</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>144</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>145</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>146</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>147</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>148</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>149</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>150</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>151</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>152</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>153</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>154</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>155</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>156</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>157</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>158</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>159</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>160</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>161</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>162</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>163</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>164</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>165</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>166</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>167</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>168</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>169</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>170</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>171</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>172</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>173</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>174</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>175</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>176</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>177</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>178</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>179</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>180</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>181</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>182</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>183</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>184</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>185</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>186</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>187</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>188</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>189</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>190</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>191</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>192</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>193</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>194</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>195</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>196</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>197</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>198</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>199</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>200</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>201</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>202</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>203</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>204</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>205</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>206</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>207</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>208</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>209</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>210</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>211</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>212</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>213</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>214</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>215</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>216</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>217</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>218</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>219</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>220</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>221</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>222</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>223</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>224</span><br data-v-8e09d10e></div></div><div data-range="repeatUntil(*reference*)" class="part" data-v-8e09d10e>
از `TypeScript` میخواهد ماژول ها از فایل های مشخص شده لود کند
</div> <div data-range="repeatUntil(*import*from*)" class="part" data-v-8e09d10e>
- توابع مورد نیاز از ماژول هسته انتخاب  می کند
- موجودیت های برنامه در اختیار این سیستم می گذارد
- یکی از `enum` ها رو از ساختارهای برنامه لود میکند
</div> <div data-range="block(*const*webApiClientSettings*)" class="part" data-v-8e09d10e>
- برای  اتصال ایمن `X-Token`  تنظیم میکنیم
- برای ساپورت `CORS` ، هدر را  باید به شکل زیر تنظیم کنیم
- `baseURL` باید دارای `getter` و `setter` باشد
- برای اعتبار سنجی ، از تابع `validateStatus` استفاده میکنیم 
- در نهایت برای آنها `title` نیز تنظیم میکنیم . که کاربرد Debug دارد
- این فریم ورک برای ارتباط بین سرور و کلاینت از [`axois`](https://github.com/axios/axios) بهره مند شده است
- شما می توانید تنظیمات بسیار زیادی داشته باشید ، برای توضیحات بیشتر به مستندات 
[`axois`](https://github.com/axios/axios)  مراجعه کنید.
</div> <div data-range="line(*const*createClientForREST*)" class="part" data-v-8e09d10e>
تابع `createClientForREST` به عنوان یک `factory` تابعی به عنوان خروجی برمی گرداند که متد پایه ارتباط با سرور می باشد همچون تابع [`fetch`](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch) که در مرورگر بصورت توکار وجود دارد  این تابع نسبت تنظیمات فوق تولید می شود و برای استفاده از فریم ورک بهینه شده است ، در واقع این به بعد هرکجا `webApi` دیدید متوجه باشید که اشاره یک متد است 
</div> <div data-range="block(*IRowListResultDto*)|block(*IResponseForLogin*)|block(*IResponseForGetCurrentUser*)" class="part" data-v-8e09d10e>
کد های مربوط `interface` های مورد استفاده در این ماژول
</div> <div data-range="block(*export*AuthenticationController*)" class="part" data-v-8e09d10e>
تعریف `AuthenticationController` برای پروسه لاگین به سیستم - البته این کد بخاطر جداسازی ماژول لاگین استفاده نمی شود - فقط جنبه آموزشی دارد
</div> <div data-range="block(*BasicController*)" class="part" data-v-8e09d10e>
تعریف `BasicController` برای گرفتن نسخه برنامه استفاده می شود - **ساده ترین نوع API **
</div> <div data-range="block(*crudControllerFactory*)" class="part" data-v-8e09d10e>
 برای آسان تر کردن توسعه `API` های که قالب آنها `CRUD` می باشد ما تابعی را تعریف کردیم تا به شکل منظم 
 امکان تعریف `API` های برنامه صرفا با یک خط کد بدهد
</div> <div data-range="line(*export*crudControllerFactory*)" class="part" data-v-8e09d10e>
استفاده از تابع فوق الذکر جهت تعریف `API` برای نقش ها</div> <div data-range="block(*bodyMapper*)" class="part" data-v-8e09d10e>
برای آنکه سمت سرور و سمت کلاینت باهم مطابقت داشته باشند - باید داده های آنها یکسان باشد - 
اطلاعات مشخص شده در قسمت دامین کد با هماهنگی سرور تنظیم شده است ولی داده که از سمت فریم ورک مشخص می شود نیز باید با سمت سرور هماهنگ شوند ، این تابع اینکار انجام می دهد این معمولا در صفحه بندی و مرتب سازی نیاز می باشد  </div>
نکته : هسته فریم ورک با [json-server](https://www.npmjs.com/package/json-server) سازگار دارد - پروژه سپیداران نیز بر همین اساس طراحی شده است
</div></div></div> <h2 id="ماژول-ارتباط-با-device-manager"><a href="#ماژول-ارتباط-با-device-manager" aria-hidden="true" class="header-anchor">#</a> ماژول ارتباط با <code>device-manager</code></h2> <ul class="contains-task-list"><li class="task-list-item"><label><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> دریافت سنجه های هویتی در این ماژول انجام می شود</label></li> <li class="task-list-item"><label><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> داخل این ماژول ، <code>interface</code> های مربوط به آن نیز تعریف شده است</label></li> <li class="task-list-item"><label><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> توابع به صورت <code>async/await</code> تعریف شده است</label></li></ul> <div class="code-preview-root" data-v-8e09d10e><header data-v-8e09d10e><div data-v-8e09d10e><button data-nav="1" class="next" data-v-8e09d10e><span data-v-8e09d10e>Next</span></button> <button data-nav="-1" class="prev" data-v-8e09d10e><span data-v-8e09d10e>Prev</span></button> <br data-v-8e09d10e> <div class="center-me" data-v-8e09d10e></div></div> <div class="space" data-v-8e09d10e></div></header> <section data-v-8e09d10e><div class="parts" data-v-8e09d10e><div class="inner" data-v-8e09d10e></div></div></section> <div class="__content" data-v-8e09d10e><div class="__inner" data-v-8e09d10e><div class="language-tsx line-numbers-mode" data-v-8e09d10e><div class="highlight-lines" data-v-8e09d10e><div class="highlighted" data-v-8e09d10e> </div><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e></div><pre class="language-tsx" data-v-8e09d10e><code data-v-8e09d10e><span class="token comment" data-v-8e09d10e>/// &lt;reference path=&quot;../../../dts/organic-ui.d.ts&quot; /&gt;</span>
<span class="token keyword" data-v-8e09d10e>import</span> <span class="token punctuation" data-v-8e09d10e>{</span> createClientForREST<span class="token punctuation" data-v-8e09d10e>,</span> IActionsForCRUD<span class="token punctuation" data-v-8e09d10e>,</span> OptionsForRESTClient<span class="token punctuation" data-v-8e09d10e>,</span> IListData<span class="token punctuation" data-v-8e09d10e>,</span> IAdvancedQueryFilters<span class="token punctuation" data-v-8e09d10e>,</span> isProdMode <span class="token punctuation" data-v-8e09d10e>}</span> <span class="token keyword" data-v-8e09d10e>from</span> <span class="token string" data-v-8e09d10e>&quot;@organic-ui&quot;</span><span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token keyword" data-v-8e09d10e>import</span> <span class="token punctuation" data-v-8e09d10e>{</span> AppEntities <span class="token punctuation" data-v-8e09d10e>}</span> <span class="token keyword" data-v-8e09d10e>from</span> <span class="token string" data-v-8e09d10e>'../entities'</span><span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token keyword" data-v-8e09d10e>import</span> <span class="token punctuation" data-v-8e09d10e>{</span> DevicesController<span class="token punctuation" data-v-8e09d10e>,</span> loginUrl <span class="token punctuation" data-v-8e09d10e>}</span> <span class="token keyword" data-v-8e09d10e>from</span> <span class="token string" data-v-8e09d10e>&quot;.&quot;</span><span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token keyword" data-v-8e09d10e>export</span> <span class="token keyword" data-v-8e09d10e>interface</span> <span class="token class-name" data-v-8e09d10e>IScannedDevice</span> <span class="token punctuation" data-v-8e09d10e>{</span>
    deviceSerial<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>number</span><span class="token punctuation" data-v-8e09d10e>;</span>
    deviceType<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>number</span><span class="token punctuation" data-v-8e09d10e>;</span>
    deviceTypeString<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>string</span><span class="token punctuation" data-v-8e09d10e>;</span>
    connectionMode<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>string</span><span class="token punctuation" data-v-8e09d10e>;</span>
    ipv4Address<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>string</span><span class="token punctuation" data-v-8e09d10e>;</span>
    port<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>number</span><span class="token punctuation" data-v-8e09d10e>;</span>
    maxNumOfUser<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>number</span><span class="token punctuation" data-v-8e09d10e>;</span>
    isUserNameSupported<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>boolean</span><span class="token punctuation" data-v-8e09d10e>;</span>
    isUserPhotoSupported<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>boolean</span><span class="token punctuation" data-v-8e09d10e>;</span>
    isPinSupported<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>boolean</span><span class="token punctuation" data-v-8e09d10e>;</span>
    isCardSupported<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>boolean</span><span class="token punctuation" data-v-8e09d10e>;</span>
    isFingerSupported<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>boolean</span><span class="token punctuation" data-v-8e09d10e>;</span>
    isFaceSupported<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>boolean</span><span class="token punctuation" data-v-8e09d10e>;</span>
    isWlanSupported<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>boolean</span><span class="token punctuation" data-v-8e09d10e>;</span>
    isTnaSupported<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>boolean</span><span class="token punctuation" data-v-8e09d10e>;</span>
    isTriggerActionSupported<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>boolean</span><span class="token punctuation" data-v-8e09d10e>;</span>
    isWiegandSupported<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>boolean</span><span class="token punctuation" data-v-8e09d10e>;</span>
    isImageLogSupported<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>boolean</span><span class="token punctuation" data-v-8e09d10e>;</span>
    isDnsSupported<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>boolean</span><span class="token punctuation" data-v-8e09d10e>;</span>
    isJobCodeSupported<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>boolean</span><span class="token punctuation" data-v-8e09d10e>;</span>
    isWiegandMultiSupported<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>boolean</span><span class="token punctuation" data-v-8e09d10e>;</span>
    isPhraseCodeSupported<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>boolean</span><span class="token punctuation" data-v-8e09d10e>;</span>
    isCard1xSupported<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>boolean</span><span class="token punctuation" data-v-8e09d10e>;</span>
    isSystemExtSupported<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>boolean</span><span class="token punctuation" data-v-8e09d10e>;</span>
    isVoipSupported<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>boolean</span><span class="token punctuation" data-v-8e09d10e>;</span>
    existInDbStatus<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>boolean</span><span class="token punctuation" data-v-8e09d10e>;</span>
    existInDbStatusStr<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>string</span><span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token punctuation" data-v-8e09d10e>}</span>

<span class="token keyword" data-v-8e09d10e>export</span> <span class="token keyword" data-v-8e09d10e>interface</span> <span class="token class-name" data-v-8e09d10e>IGetTimesResult</span> <span class="token punctuation" data-v-8e09d10e>{</span>
    message<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>string</span><span class="token punctuation" data-v-8e09d10e>;</span>
    sessionId<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>string</span><span class="token punctuation" data-v-8e09d10e>;</span>
    isFinal<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>boolean</span><span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token punctuation" data-v-8e09d10e>}</span>

<span class="token keyword" data-v-8e09d10e>const</span> deviceManagerSettings<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token function-variable function" data-v-8e09d10e>OptionsForRESTClient</span> <span class="token operator" data-v-8e09d10e>=</span> <span class="token punctuation" data-v-8e09d10e>(</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> <span class="token punctuation" data-v-8e09d10e>{</span>
    <span class="token keyword" data-v-8e09d10e>const</span> token <span class="token operator" data-v-8e09d10e>=</span> localStorage<span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>getItem</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>'token'</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>const</span> baseURL <span class="token operator" data-v-8e09d10e>=</span> <span class="token operator" data-v-8e09d10e>!</span><span class="token function" data-v-8e09d10e>isProdMode</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token operator" data-v-8e09d10e>&amp;&amp;</span> <span class="token punctuation" data-v-8e09d10e>(</span>localStorage<span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>getItem</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>'baseURL-DeviceManager'</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token operator" data-v-8e09d10e>||</span> undefined<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>return</span> <span class="token punctuation" data-v-8e09d10e>{</span>
        title<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token string" data-v-8e09d10e>'DevMan API'</span><span class="token punctuation" data-v-8e09d10e>,</span>
        baseURL<span class="token punctuation" data-v-8e09d10e>:</span> baseURL <span class="token operator" data-v-8e09d10e>||</span> <span class="token template-string" data-v-8e09d10e><span class="token string" data-v-8e09d10e>`http://</span><span class="token interpolation" data-v-8e09d10e><span class="token interpolation-punctuation punctuation" data-v-8e09d10e>${</span>location<span class="token punctuation" data-v-8e09d10e>.</span>hostname<span class="token interpolation-punctuation punctuation" data-v-8e09d10e>}</span></span><span class="token string" data-v-8e09d10e>:51369/`</span></span><span class="token punctuation" data-v-8e09d10e>,</span>
        <span class="token function-variable function" data-v-8e09d10e>setBaseURL</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token parameter" data-v-8e09d10e>baseURL</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> localStorage<span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>setItem</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>'baseURL-DeviceManager'</span><span class="token punctuation" data-v-8e09d10e>,</span> baseURL<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>,</span>

        headers<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token punctuation" data-v-8e09d10e>{</span>
            <span class="token string" data-v-8e09d10e>'Authorization'</span><span class="token punctuation" data-v-8e09d10e>:</span> token <span class="token operator" data-v-8e09d10e>?</span> <span class="token template-string" data-v-8e09d10e><span class="token string" data-v-8e09d10e>`Bearer </span><span class="token interpolation" data-v-8e09d10e><span class="token interpolation-punctuation punctuation" data-v-8e09d10e>${</span>token<span class="token interpolation-punctuation punctuation" data-v-8e09d10e>}</span></span><span class="token string" data-v-8e09d10e>`</span></span> <span class="token punctuation" data-v-8e09d10e>:</span> <span class="token string" data-v-8e09d10e>''</span><span class="token punctuation" data-v-8e09d10e>,</span>
            <span class="token string" data-v-8e09d10e>'Access-Control-Allow-Origin'</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token string" data-v-8e09d10e>'*'</span>
        <span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>,</span>
        <span class="token function-variable function" data-v-8e09d10e>validateStatus</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token parameter" data-v-8e09d10e>status</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> <span class="token punctuation" data-v-8e09d10e>{</span>
            <span class="token keyword" data-v-8e09d10e>if</span> <span class="token punctuation" data-v-8e09d10e>(</span>status <span class="token operator" data-v-8e09d10e>==</span> <span class="token number" data-v-8e09d10e>401</span><span class="token punctuation" data-v-8e09d10e>)</span> location<span class="token punctuation" data-v-8e09d10e>.</span>href <span class="token operator" data-v-8e09d10e>=</span> <span class="token template-string" data-v-8e09d10e><span class="token string" data-v-8e09d10e>`</span><span class="token interpolation" data-v-8e09d10e><span class="token interpolation-punctuation punctuation" data-v-8e09d10e>${</span>loginUrl<span class="token interpolation-punctuation punctuation" data-v-8e09d10e>}</span></span><span class="token string" data-v-8e09d10e>?message=session-expired`</span></span><span class="token punctuation" data-v-8e09d10e>;</span>
            <span class="token keyword" data-v-8e09d10e>if</span> <span class="token punctuation" data-v-8e09d10e>(</span>status <span class="token operator" data-v-8e09d10e>==</span> <span class="token number" data-v-8e09d10e>403</span><span class="token punctuation" data-v-8e09d10e>)</span> location<span class="token punctuation" data-v-8e09d10e>.</span>href <span class="token operator" data-v-8e09d10e>=</span> loginUrl<span class="token punctuation" data-v-8e09d10e>;</span>
            <span class="token keyword" data-v-8e09d10e>return</span> status <span class="token operator" data-v-8e09d10e>==</span> <span class="token number" data-v-8e09d10e>200</span><span class="token punctuation" data-v-8e09d10e>;</span>
        <span class="token punctuation" data-v-8e09d10e>}</span>
    <span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token punctuation" data-v-8e09d10e>}</span>
<span class="token keyword" data-v-8e09d10e>const</span> deviceManagerApi <span class="token operator" data-v-8e09d10e>=</span> <span class="token function" data-v-8e09d10e>createClientForREST</span><span class="token punctuation" data-v-8e09d10e>(</span>deviceManagerSettings<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>

<span class="token keyword" data-v-8e09d10e>export</span> <span class="token keyword" data-v-8e09d10e>async</span> <span class="token keyword" data-v-8e09d10e>function</span> <span class="token function" data-v-8e09d10e>scanFingerAdvanced</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token parameter" data-v-8e09d10e>deviceId<span class="token punctuation" data-v-8e09d10e>,</span> onProgress<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>Function</span></span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token punctuation" data-v-8e09d10e>{</span>
    <span class="token keyword" data-v-8e09d10e>const</span> device <span class="token operator" data-v-8e09d10e>=</span> <span class="token keyword" data-v-8e09d10e>await</span> DevicesController<span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>read</span><span class="token punctuation" data-v-8e09d10e>(</span>deviceId<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>if</span> <span class="token punctuation" data-v-8e09d10e>(</span><span class="token operator" data-v-8e09d10e>!</span>device <span class="token operator" data-v-8e09d10e>||</span> <span class="token operator" data-v-8e09d10e>!</span>device<span class="token punctuation" data-v-8e09d10e>.</span>serial<span class="token punctuation" data-v-8e09d10e>)</span> <span class="token keyword" data-v-8e09d10e>throw</span> <span class="token string" data-v-8e09d10e>'deviceSerial is null'</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>const</span> deviceDefine <span class="token operator" data-v-8e09d10e>=</span> <span class="token punctuation" data-v-8e09d10e>{</span> serial<span class="token punctuation" data-v-8e09d10e>:</span> device<span class="token punctuation" data-v-8e09d10e>.</span>serial<span class="token punctuation" data-v-8e09d10e>,</span> ip<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token keyword" data-v-8e09d10e>null</span><span class="token punctuation" data-v-8e09d10e>,</span> model<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token keyword" data-v-8e09d10e>null</span> <span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>const</span> reqBody <span class="token operator" data-v-8e09d10e>=</span> <span class="token punctuation" data-v-8e09d10e>{</span> deviceDefine<span class="token punctuation" data-v-8e09d10e>,</span> sessionId<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token keyword" data-v-8e09d10e>null</span> <span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>const</span> scanResultArray<span class="token punctuation" data-v-8e09d10e>:</span> AppEntities<span class="token punctuation" data-v-8e09d10e>.</span>IScanTemplateResultDTO<span class="token punctuation" data-v-8e09d10e>[</span><span class="token punctuation" data-v-8e09d10e>]</span> <span class="token operator" data-v-8e09d10e>=</span> <span class="token punctuation" data-v-8e09d10e>[</span><span class="token punctuation" data-v-8e09d10e>]</span><span class="token punctuation" data-v-8e09d10e>;</span>
    onProgress <span class="token operator" data-v-8e09d10e>=</span> onProgress <span class="token operator" data-v-8e09d10e>||</span> <span class="token punctuation" data-v-8e09d10e>(</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> <span class="token number" data-v-8e09d10e>0</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token function" data-v-8e09d10e>onProgress</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token punctuation" data-v-8e09d10e>{</span> message<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token string" data-v-8e09d10e>'0%'</span><span class="token punctuation" data-v-8e09d10e>,</span> success<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token boolean" data-v-8e09d10e>true</span> <span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>do</span> <span class="token punctuation" data-v-8e09d10e>{</span>
        <span class="token keyword" data-v-8e09d10e>const</span> scanResult <span class="token operator" data-v-8e09d10e>=</span> <span class="token keyword" data-v-8e09d10e>await</span> deviceManagerApi<span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>AppEntities.IScanTemplateResultDTO</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>('POST', '/DeviceRESTService/Devices/ScanFingerAdvanced', reqBody);
        reqBody.sessionId = reqBody.sessionId || scanResult.sessionId;
        const </span><span class="token punctuation" data-v-8e09d10e>{</span> message<span class="token punctuation" data-v-8e09d10e>,</span> success <span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e> = scanResult;
        scanResultArray.push(scanResult);
        onProgress(</span><span class="token punctuation" data-v-8e09d10e>{</span> success<span class="token punctuation" data-v-8e09d10e>,</span> message<span class="token punctuation" data-v-8e09d10e>,</span> scanResultArray <span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e>);
        if (!scanResult.success || scanResult.isFinal) break;
    } while (true);
    return scanResultArray;

}

export async function scanCard({deviceId,bypassCard}) </span><span class="token punctuation" data-v-8e09d10e>{</span>
    <span class="token keyword" data-v-8e09d10e>const</span> device <span class="token operator" data-v-8e09d10e>=</span> <span class="token keyword" data-v-8e09d10e>await</span> DevicesController<span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>read</span><span class="token punctuation" data-v-8e09d10e>(</span>deviceId<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>if</span> <span class="token punctuation" data-v-8e09d10e>(</span><span class="token operator" data-v-8e09d10e>!</span>device <span class="token operator" data-v-8e09d10e>||</span> <span class="token operator" data-v-8e09d10e>!</span>device<span class="token punctuation" data-v-8e09d10e>.</span>serial<span class="token punctuation" data-v-8e09d10e>)</span> <span class="token keyword" data-v-8e09d10e>throw</span> <span class="token string" data-v-8e09d10e>'deviceSerial is null'</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>const</span> deviceDefine <span class="token operator" data-v-8e09d10e>=</span> <span class="token punctuation" data-v-8e09d10e>{</span> serial<span class="token punctuation" data-v-8e09d10e>:</span> device<span class="token punctuation" data-v-8e09d10e>.</span>serial<span class="token punctuation" data-v-8e09d10e>,</span> ip<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token keyword" data-v-8e09d10e>null</span><span class="token punctuation" data-v-8e09d10e>,</span> model<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token keyword" data-v-8e09d10e>null</span> <span class="token punctuation" data-v-8e09d10e>,</span>bypassCard<span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token comment" data-v-8e09d10e>// const reqBody = { deviceDefine, sessionId: null };</span>
    <span class="token keyword" data-v-8e09d10e>const</span> scanResultArray<span class="token punctuation" data-v-8e09d10e>:</span> AppEntities<span class="token punctuation" data-v-8e09d10e>.</span>IScanTemplateResultDTO<span class="token punctuation" data-v-8e09d10e>[</span><span class="token punctuation" data-v-8e09d10e>]</span> <span class="token operator" data-v-8e09d10e>=</span> <span class="token punctuation" data-v-8e09d10e>[</span><span class="token punctuation" data-v-8e09d10e>]</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token comment" data-v-8e09d10e>// onProgress = onProgress || (() =&gt; 0);</span>
    <span class="token comment" data-v-8e09d10e>// onProgress({message:'0%',success:true});</span>
    <span class="token keyword" data-v-8e09d10e>const</span> scanResult <span class="token operator" data-v-8e09d10e>=</span> <span class="token keyword" data-v-8e09d10e>await</span> deviceManagerApi<span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>AppEntities.IScanTemplateResultDTO</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>('POST', '/DeviceRESTService/Devices/ScanCard', deviceDefine);
    // reqBody.sessionId = reqBody.sessionId || scanResult.sessionId;
    // const { message, success } = scanResult;
    // scanResultArray.push(scanResult);
    // onProgress({ success, message, scanResultArray});
    return scanResult;

}

export async function scanFace(deviceId) </span><span class="token punctuation" data-v-8e09d10e>{</span>
    <span class="token keyword" data-v-8e09d10e>const</span> device <span class="token operator" data-v-8e09d10e>=</span> <span class="token keyword" data-v-8e09d10e>await</span> DevicesController<span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>read</span><span class="token punctuation" data-v-8e09d10e>(</span>deviceId<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>if</span> <span class="token punctuation" data-v-8e09d10e>(</span><span class="token operator" data-v-8e09d10e>!</span>device <span class="token operator" data-v-8e09d10e>||</span> <span class="token operator" data-v-8e09d10e>!</span>device<span class="token punctuation" data-v-8e09d10e>.</span>serial<span class="token punctuation" data-v-8e09d10e>)</span> <span class="token keyword" data-v-8e09d10e>throw</span> <span class="token string" data-v-8e09d10e>'deviceSerial is null'</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>const</span> deviceDefine <span class="token operator" data-v-8e09d10e>=</span> <span class="token punctuation" data-v-8e09d10e>{</span> serial<span class="token punctuation" data-v-8e09d10e>:</span> device<span class="token punctuation" data-v-8e09d10e>.</span>serial<span class="token punctuation" data-v-8e09d10e>,</span> ip<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token keyword" data-v-8e09d10e>null</span><span class="token punctuation" data-v-8e09d10e>,</span> model<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token keyword" data-v-8e09d10e>null</span> <span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>const</span> scanResultArray<span class="token punctuation" data-v-8e09d10e>:</span> AppEntities<span class="token punctuation" data-v-8e09d10e>.</span>IScanTemplateResultDTO<span class="token punctuation" data-v-8e09d10e>[</span><span class="token punctuation" data-v-8e09d10e>]</span> <span class="token operator" data-v-8e09d10e>=</span> <span class="token punctuation" data-v-8e09d10e>[</span><span class="token punctuation" data-v-8e09d10e>]</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>const</span> scanResult <span class="token operator" data-v-8e09d10e>=</span> <span class="token keyword" data-v-8e09d10e>await</span> deviceManagerApi<span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>AppEntities.IScanTemplateResultDTO</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>('POST', '/DeviceRESTService/Devices/ScanFace', deviceDefine);
    return scanResult;

}


export async function searchDevices() </span><span class="token punctuation" data-v-8e09d10e>{</span>
    <span class="token keyword" data-v-8e09d10e>return</span> deviceManagerApi<span class="token operator" data-v-8e09d10e>&lt;</span>IScannedDevice<span class="token punctuation" data-v-8e09d10e>[</span><span class="token punctuation" data-v-8e09d10e>]</span><span class="token operator" data-v-8e09d10e>&gt;</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>'POST'</span><span class="token punctuation" data-v-8e09d10e>,</span> <span class="token string" data-v-8e09d10e>'/DeviceRESTService/Devices/SearchDevices'</span><span class="token punctuation" data-v-8e09d10e>,</span> <span class="token punctuation" data-v-8e09d10e>{</span><span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e>
export async function searchDevicesByIp(IP) </span><span class="token punctuation" data-v-8e09d10e>{</span>
    <span class="token keyword" data-v-8e09d10e>return</span> deviceManagerApi<span class="token operator" data-v-8e09d10e>&lt;</span>IScannedDevice<span class="token punctuation" data-v-8e09d10e>[</span><span class="token punctuation" data-v-8e09d10e>]</span><span class="token operator" data-v-8e09d10e>&gt;</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>&quot;POST&quot;</span><span class="token punctuation" data-v-8e09d10e>,</span> <span class="token string" data-v-8e09d10e>'/DeviceRESTService/Devices/SearchDevicesByIp'</span><span class="token punctuation" data-v-8e09d10e>,</span> <span class="token punctuation" data-v-8e09d10e>{</span> <span class="token constant" data-v-8e09d10e>IP</span> <span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token punctuation" data-v-8e09d10e>}</span><span class="token plain-text" data-v-8e09d10e>
export function addDeviceByIpAddress(params: { serial, ip, model, port }) </span><span class="token punctuation" data-v-8e09d10e>{</span>
    <span class="token keyword" data-v-8e09d10e>return</span> deviceManagerApi<span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>Boolean</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>('POST', '/DeviceRESTService/Devices/AddDeviceByIpAddress', params)
}

export function getTimes(params: { sessionId, devicesIds }) </span><span class="token punctuation" data-v-8e09d10e>{</span>
    <span class="token keyword" data-v-8e09d10e>return</span> deviceManagerApi<span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span><span class="token class-name" data-v-8e09d10e>IGetTimesResult</span></span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>('POST', '/DeviceRESTService/Devices/GetTimes', params)
}
</span></code></pre><div class="line-numbers-wrapper" data-v-8e09d10e><span class="line-number" data-v-8e09d10e>1</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>2</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>3</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>4</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>5</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>6</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>7</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>8</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>9</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>10</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>11</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>12</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>13</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>14</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>15</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>16</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>17</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>18</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>19</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>20</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>21</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>22</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>23</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>24</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>25</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>26</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>27</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>28</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>29</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>30</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>31</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>32</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>33</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>34</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>35</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>36</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>37</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>38</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>39</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>40</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>41</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>42</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>43</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>44</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>45</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>46</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>47</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>48</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>49</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>50</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>51</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>52</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>53</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>54</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>55</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>56</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>57</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>58</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>59</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>60</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>61</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>62</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>63</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>64</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>65</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>66</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>67</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>68</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>69</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>70</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>71</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>72</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>73</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>74</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>75</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>76</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>77</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>78</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>79</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>80</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>81</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>82</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>83</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>84</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>85</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>86</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>87</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>88</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>89</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>90</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>91</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>92</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>93</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>94</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>95</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>96</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>97</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>98</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>99</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>100</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>101</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>102</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>103</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>104</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>105</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>106</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>107</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>108</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>109</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>110</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>111</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>112</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>113</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>114</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>115</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>116</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>117</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>118</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>119</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>120</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>121</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>122</span><br data-v-8e09d10e></div></div><div data-range="repeatUntil(*reference*)" class="part" data-v-8e09d10e>
از `TypeScript` میخواهد ماژول ها از فایل های مشخص شده لود کند
</div> <div data-range="repeatUntil(*import*from*)" class="part" data-v-8e09d10e>
توابع مورد نیاز از ماژول هسته انتخاب  می کند
</div> <div data-range="block(*IScannedDevice*)" class="part" data-v-8e09d10e>
 تعریف اینترفیس `IScannedDevice` برای دستگاه در هنگام اسکن
</div> <div data-range="block(*const*OptionsForRESTClient*)" class="part" data-v-8e09d10e>
 تنظیمات مربوط به اتصال به سرور `device-manager`
</div> <div data-range="block(*const*createClientForREST*)" class="part" data-v-8e09d10e>
تابع `createClientForREST` به عنوان یک `factory` تابعی به عنوان خروجی برمی گرداند که متد پایه ارتباط با سرور می باشد همچون تابع [`fetch`](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch) که در مرورگر بصورت توکار وجود دارد  این تابع نسبت تنظیمات فوق تولید می شود و برای استفاده از فریم ورک بهینه شده است ، در واقع این به بعد هرکجا `deviceManagerApi` دیدید متوجه باشید که اشاره یک متد است  
</div> <div data-range="block(*function*scanFingerAdvanced*)" class="part" data-v-8e09d10e>
 دریافت اثر انگشت از در طی چندین مرحله و با فراخوانی `callback` در هر مرحله
 </div> <div data-range="block(*function*scanCard*)" class="part" data-v-8e09d10e>
اسکن کارت که در هنگام ثبت سنجه هویتی کارت کارت دارد
 </div> <div data-range="block(*function*scanFace*)" class="part" data-v-8e09d10e>
اسکن صورت در قالب یک سنجه هویتی
 </div> <div data-range="block(*function*searchDevices*)" class="part" data-v-8e09d10e>
جستجو دستگاه ها در سیستم
 </div> <div data-range="block(*function*searchDevicesByIp*)" class="part" data-v-8e09d10e>
جستجو دستگاه بر اساس IP
 </div></div></div></div> <h2 id="ماژول-ارتباط-bio-mini"><a href="#ماژول-ارتباط-bio-mini" aria-hidden="true" class="header-anchor">#</a> ماژول ارتباط <code>bio-mini</code></h2> <ul class="contains-task-list"><li class="task-list-item"><label><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> بخاطر اینکه این نوع دستگاه تحت شبکه نیس ،  ارتباط با همیشه کامپیوتر کلاینت می باشد و در واقع سرور هدف همیشه <code>localhost</code> است</label></li> <li class="task-list-item"><label><input checked="checked" disabled="disabled" type="checkbox" class="task-list-item-checkbox"> کد ها شبیه به <code>device-manager</code> می باشد</label></li></ul> <div class="code-preview-root" data-v-8e09d10e><header data-v-8e09d10e><div data-v-8e09d10e><button data-nav="1" class="next" data-v-8e09d10e><span data-v-8e09d10e>Next</span></button> <button data-nav="-1" class="prev" data-v-8e09d10e><span data-v-8e09d10e>Prev</span></button> <br data-v-8e09d10e> <div class="center-me" data-v-8e09d10e></div></div> <div class="space" data-v-8e09d10e></div></header> <section data-v-8e09d10e><div class="parts" data-v-8e09d10e><div class="inner" data-v-8e09d10e></div></div></section> <div class="__content" data-v-8e09d10e><div class="__inner" data-v-8e09d10e><div class="language-tsx line-numbers-mode" data-v-8e09d10e><div class="highlight-lines" data-v-8e09d10e><div class="highlighted" data-v-8e09d10e> </div><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e><br data-v-8e09d10e></div><pre class="language-tsx" data-v-8e09d10e><code data-v-8e09d10e><span class="token keyword" data-v-8e09d10e>const</span> baseURL <span class="token operator" data-v-8e09d10e>=</span> <span class="token template-string" data-v-8e09d10e><span class="token string" data-v-8e09d10e>`http://localhost:51396/SepidBioNakhiService/BioMini`</span></span><span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token keyword" data-v-8e09d10e>import</span> <span class="token punctuation" data-v-8e09d10e>{</span> OptionsForRESTClient<span class="token punctuation" data-v-8e09d10e>,</span> createClientForREST <span class="token punctuation" data-v-8e09d10e>}</span> <span class="token keyword" data-v-8e09d10e>from</span> <span class="token string" data-v-8e09d10e>'@organic-ui'</span><span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token keyword" data-v-8e09d10e>import</span> <span class="token punctuation" data-v-8e09d10e>{</span> TemplateTypes <span class="token punctuation" data-v-8e09d10e>}</span> <span class="token keyword" data-v-8e09d10e>from</span> <span class="token string" data-v-8e09d10e>'../zero-data-structures'</span><span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token keyword" data-v-8e09d10e>const</span> bioMiniApiClientSettings<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token function-variable function" data-v-8e09d10e>OptionsForRESTClient</span> <span class="token operator" data-v-8e09d10e>=</span> <span class="token punctuation" data-v-8e09d10e>(</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> <span class="token punctuation" data-v-8e09d10e>{</span>
    <span class="token keyword" data-v-8e09d10e>const</span> token <span class="token operator" data-v-8e09d10e>=</span> localStorage<span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>getItem</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>'token'</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>return</span> <span class="token punctuation" data-v-8e09d10e>{</span>
        title<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token string" data-v-8e09d10e>'BioMini API'</span><span class="token punctuation" data-v-8e09d10e>,</span>
        baseURL<span class="token punctuation" data-v-8e09d10e>,</span>
        <span class="token function-variable function" data-v-8e09d10e>setBaseURL</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token parameter" data-v-8e09d10e>baseURL</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> <span class="token number" data-v-8e09d10e>0</span><span class="token punctuation" data-v-8e09d10e>,</span>
        headers<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token punctuation" data-v-8e09d10e>{</span>
            <span class="token string" data-v-8e09d10e>'Authorization'</span><span class="token punctuation" data-v-8e09d10e>:</span> token <span class="token operator" data-v-8e09d10e>?</span> <span class="token template-string" data-v-8e09d10e><span class="token string" data-v-8e09d10e>`Bearer </span><span class="token interpolation" data-v-8e09d10e><span class="token interpolation-punctuation punctuation" data-v-8e09d10e>${</span>token<span class="token interpolation-punctuation punctuation" data-v-8e09d10e>}</span></span><span class="token string" data-v-8e09d10e>`</span></span> <span class="token punctuation" data-v-8e09d10e>:</span> <span class="token string" data-v-8e09d10e>''</span><span class="token punctuation" data-v-8e09d10e>,</span>
            <span class="token string" data-v-8e09d10e>'Access-Control-Allow-Origin'</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token string" data-v-8e09d10e>'*'</span>
        <span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>,</span>
        <span class="token function-variable function" data-v-8e09d10e>validateStatus</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token parameter" data-v-8e09d10e>status</span> <span class="token operator" data-v-8e09d10e>=&gt;</span> <span class="token punctuation" data-v-8e09d10e>{</span>
            <span class="token keyword" data-v-8e09d10e>return</span> <span class="token punctuation" data-v-8e09d10e>(</span>status <span class="token operator" data-v-8e09d10e>&gt;=</span> <span class="token number" data-v-8e09d10e>200</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token operator" data-v-8e09d10e>&amp;&amp;</span> <span class="token punctuation" data-v-8e09d10e>(</span>status <span class="token operator" data-v-8e09d10e>&lt;=</span> <span class="token number" data-v-8e09d10e>299</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
        <span class="token punctuation" data-v-8e09d10e>}</span>
    <span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token punctuation" data-v-8e09d10e>}</span>
<span class="token keyword" data-v-8e09d10e>export</span> <span class="token keyword" data-v-8e09d10e>const</span> bioMiniApi <span class="token operator" data-v-8e09d10e>=</span> <span class="token function" data-v-8e09d10e>createClientForREST</span><span class="token punctuation" data-v-8e09d10e>(</span>bioMiniApiClientSettings<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>

<span class="token keyword" data-v-8e09d10e>export</span> <span class="token keyword" data-v-8e09d10e>async</span> <span class="token keyword" data-v-8e09d10e>function</span> <span class="token function" data-v-8e09d10e>checkBiominiAvailability</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token punctuation" data-v-8e09d10e>{</span>
    <span class="token keyword" data-v-8e09d10e>return</span> bioMiniApi<span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span>string</span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>('GET', `/DeviceAvailable`);
}
export async function scanFinger(scanTemplateDto: any) </span><span class="token punctuation" data-v-8e09d10e>{</span>
    <span class="token keyword" data-v-8e09d10e>return</span> bioMiniApi<span class="token tag" data-v-8e09d10e><span class="token tag" data-v-8e09d10e><span class="token punctuation" data-v-8e09d10e>&lt;</span>any</span><span class="token punctuation" data-v-8e09d10e>&gt;</span></span><span class="token plain-text" data-v-8e09d10e>('POST', `/ScanFingerAdvanced`, scanTemplateDto);

}
export async function scanFingersForBioMini(onProgress: Function) </span><span class="token punctuation" data-v-8e09d10e>{</span>

    <span class="token keyword" data-v-8e09d10e>let</span> scanTemplateDto<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token builtin" data-v-8e09d10e>any</span> <span class="token operator" data-v-8e09d10e>=</span> <span class="token punctuation" data-v-8e09d10e>{</span>
        DeviceDefine<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token punctuation" data-v-8e09d10e>{</span> Serial<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token keyword" data-v-8e09d10e>null</span><span class="token punctuation" data-v-8e09d10e>,</span> <span class="token constant" data-v-8e09d10e>IP</span><span class="token punctuation" data-v-8e09d10e>:</span> <span class="token keyword" data-v-8e09d10e>null</span><span class="token punctuation" data-v-8e09d10e>,</span> model<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token keyword" data-v-8e09d10e>null</span> <span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>,</span>
        SessionId<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token string" data-v-8e09d10e>&quot;&quot;</span>
    <span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>let</span> scanIndex <span class="token operator" data-v-8e09d10e>=</span> <span class="token number" data-v-8e09d10e>0</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>let</span> finalizeScan <span class="token operator" data-v-8e09d10e>=</span> <span class="token boolean" data-v-8e09d10e>false</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>let</span> hasError <span class="token operator" data-v-8e09d10e>=</span> <span class="token boolean" data-v-8e09d10e>false</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token comment" data-v-8e09d10e>// this.clearFingerImages();</span>

    <span class="token keyword" data-v-8e09d10e>let</span> isAvailable <span class="token operator" data-v-8e09d10e>=</span> <span class="token keyword" data-v-8e09d10e>await</span> <span class="token function" data-v-8e09d10e>checkBiominiAvailability</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>if</span> <span class="token punctuation" data-v-8e09d10e>(</span>isAvailable <span class="token operator" data-v-8e09d10e>==</span> <span class="token string" data-v-8e09d10e>&quot;0&quot;</span><span class="token punctuation" data-v-8e09d10e>)</span> <span class="token keyword" data-v-8e09d10e>throw</span> <span class="token punctuation" data-v-8e09d10e>(</span><span class="token string" data-v-8e09d10e>'دستگاه بایو مینی متصل نیست'</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>const</span> scanResultArray <span class="token operator" data-v-8e09d10e>=</span> <span class="token punctuation" data-v-8e09d10e>[</span><span class="token punctuation" data-v-8e09d10e>]</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token function" data-v-8e09d10e>onProgress</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token punctuation" data-v-8e09d10e>{</span> message<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token string" data-v-8e09d10e>'0%'</span><span class="token punctuation" data-v-8e09d10e>,</span> success<span class="token punctuation" data-v-8e09d10e>:</span> <span class="token boolean" data-v-8e09d10e>true</span> <span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token keyword" data-v-8e09d10e>while</span> <span class="token punctuation" data-v-8e09d10e>(</span><span class="token operator" data-v-8e09d10e>!</span>finalizeScan<span class="token punctuation" data-v-8e09d10e>)</span> <span class="token punctuation" data-v-8e09d10e>{</span>
        <span class="token keyword" data-v-8e09d10e>let</span> resultItem <span class="token operator" data-v-8e09d10e>=</span> <span class="token keyword" data-v-8e09d10e>await</span> <span class="token function" data-v-8e09d10e>scanFinger</span><span class="token punctuation" data-v-8e09d10e>(</span>scanTemplateDto<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
        <span class="token keyword" data-v-8e09d10e>const</span> <span class="token punctuation" data-v-8e09d10e>{</span> success<span class="token punctuation" data-v-8e09d10e>,</span> message <span class="token punctuation" data-v-8e09d10e>}</span> <span class="token operator" data-v-8e09d10e>=</span> resultItem<span class="token punctuation" data-v-8e09d10e>;</span>
        scanTemplateDto<span class="token punctuation" data-v-8e09d10e>.</span>sessionId <span class="token operator" data-v-8e09d10e>=</span> resultItem<span class="token punctuation" data-v-8e09d10e>.</span>sessionId<span class="token punctuation" data-v-8e09d10e>;</span>
        <span class="token builtin" data-v-8e09d10e>console</span><span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>log</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token punctuation" data-v-8e09d10e>{</span>message<span class="token punctuation" data-v-8e09d10e>,</span>success<span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>,</span>resultItem<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
        scanResultArray<span class="token punctuation" data-v-8e09d10e>.</span><span class="token function" data-v-8e09d10e>push</span><span class="token punctuation" data-v-8e09d10e>(</span>resultItem<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
        <span class="token keyword" data-v-8e09d10e>if</span> <span class="token punctuation" data-v-8e09d10e>(</span>resultItem<span class="token punctuation" data-v-8e09d10e>.</span>IsFinal<span class="token punctuation" data-v-8e09d10e>)</span> <span class="token punctuation" data-v-8e09d10e>{</span>
            hasError <span class="token operator" data-v-8e09d10e>=</span> <span class="token punctuation" data-v-8e09d10e>(</span><span class="token operator" data-v-8e09d10e>!</span>success<span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
            finalizeScan <span class="token operator" data-v-8e09d10e>=</span> <span class="token boolean" data-v-8e09d10e>true</span><span class="token punctuation" data-v-8e09d10e>;</span>
            <span class="token keyword" data-v-8e09d10e>break</span><span class="token punctuation" data-v-8e09d10e>;</span>
        <span class="token punctuation" data-v-8e09d10e>}</span>
        <span class="token keyword" data-v-8e09d10e>else</span> <span class="token keyword" data-v-8e09d10e>if</span> <span class="token punctuation" data-v-8e09d10e>(</span>success<span class="token punctuation" data-v-8e09d10e>)</span>
            scanIndex<span class="token operator" data-v-8e09d10e>++</span><span class="token punctuation" data-v-8e09d10e>;</span>
        <span class="token function" data-v-8e09d10e>onProgress</span><span class="token punctuation" data-v-8e09d10e>(</span><span class="token punctuation" data-v-8e09d10e>{</span> scanResultArray<span class="token punctuation" data-v-8e09d10e>,</span> message<span class="token punctuation" data-v-8e09d10e>,</span> success <span class="token punctuation" data-v-8e09d10e>}</span><span class="token punctuation" data-v-8e09d10e>)</span><span class="token punctuation" data-v-8e09d10e>;</span>
    <span class="token punctuation" data-v-8e09d10e>}</span>
    <span class="token keyword" data-v-8e09d10e>return</span> scanResultArray<span class="token punctuation" data-v-8e09d10e>;</span>
<span class="token punctuation" data-v-8e09d10e>}</span></code></pre><div class="line-numbers-wrapper" data-v-8e09d10e><span class="line-number" data-v-8e09d10e>1</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>2</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>3</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>4</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>5</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>6</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>7</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>8</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>9</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>10</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>11</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>12</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>13</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>14</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>15</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>16</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>17</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>18</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>19</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>20</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>21</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>22</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>23</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>24</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>25</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>26</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>27</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>28</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>29</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>30</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>31</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>32</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>33</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>34</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>35</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>36</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>37</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>38</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>39</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>40</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>41</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>42</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>43</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>44</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>45</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>46</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>47</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>48</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>49</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>50</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>51</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>52</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>53</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>54</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>55</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>56</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>57</span><br data-v-8e09d10e><span class="line-number" data-v-8e09d10e>58</span><br data-v-8e09d10e></div></div><div data-range="repeatUntil(*import*from*)" class="part" data-v-8e09d10e>
توابع مورد نیاز از ماژول هسته انتخاب  می کند
</div> <div data-range="block(*scanFingersForBioMini*)" class="part" data-v-8e09d10e>
تابع اصلی این ماژول که باعث اسکن اثر انگشت از دستگاه `bio-mini` می شود
</div></div></div></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/03-app-modules/02-app-model.html" class="prev">
          چند زبانه سازی
        </a></span> <span class="next"><a href="/03-app-modules/04-simple-pages.html">
          ماژول های ساده در فرانت اند
        </a> →
      </span></p></div> </div></div></div>
    <script src="/assets/js/app.838f999f.js" defer></script><script src="/assets/js/19.ae164c9b.js" defer></script><script src="/assets/js/3.18802c76.js" defer></script>
  </body>
</html>
